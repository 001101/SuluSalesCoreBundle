define(["sulusalescore/components/editable-data-row/decorators/address-view"],function(a){"use strict";var b={view:"address",viewOptions:{},instanceName:"undefined",disabled:!1},c={address:a},d={overlayContainerClass:"edit-data-overlay",overlayContainerClassSelector:".edit-data-overlay",overlayFormSelector:"editable-data-overlay-form"},e="sulu.editable-data-row.",f=function(){this.sandbox.emit(e+this.options.instanceName+".initialized")},g=function(){this.options.disabled||(this.sandbox.on("sulu.editable-data-row."+this.options.instanceName+".data.update",function(a,b){b&&(this.selectedData=b),this.data=a,this.overlayView.render()}.bind(this)),this.sandbox.on("sulu.editable-data-row."+this.options.instanceName+".overlay.initialize",function(a){a.overlayTemplate||this.sandbox.logger.error("No template for overlay defined!"),"function"!=typeof a.okCallback&&a.okCallback||"function"!=typeof a.closeCallback&&a.closeCallback?this.sandbox.logger.error("Editable-Data-Row: Invalid callbacks for overlay!"):h.call(this,a.overlayTemplate,a.overlayTitle,a.overlayOkCallback,a.overlayCloseCallback,a.overlayData)}.bind(this)))},h=function(a,b,c,e,f){var g,h,i;this.sandbox.stop(this.sandbox.dom.find(d.overlayContainerClassSelector,this.$el)),g=this.sandbox.dom.createElement('<div class="'+d.overlayContainerClass+'"></div>'),this.sandbox.dom.append(this.$el,g),i={data:f,translate:this.sandbox.translate},h=this.sandbox.util.template(a,i),this.sandbox.start([{name:"overlay@husky",options:{el:g,title:this.sandbox.translate(b),openOnStart:!0,removeOnClose:!1,skin:"wide",instanceName:this.options.instanceName,data:h,okCallback:c?c.bind(this):null,closeCallback:e?e.bind(this):null}}])},i=function(a){return!("function"!=typeof a.initialize||"function"!=typeof a.render)};return{initialize:function(){return this.options=this.sandbox.util.extend({},b,this.options),this.selectedData=this.options.value,this.data=null,this.decorators=this.sandbox.util.extend(!0,{},c),this.viewId=this.options.view,this.overlayView=this.decorators[this.viewId],this.overlayView&&i.call(this,this.overlayView)?(this.options.viewOptions.instanceName=this.options.instanceName,this.overlayView.initialize(this,this.options.viewOptions),g.call(this),this.selectedData&&this.render(),void f.call(this)):void this.sandbox.logger.error("Editable-Data-Row: View is not valid!")},render:function(){this.options.disabled&&this.sandbox.dom.addClass(this.$el,"disabled"),this.overlayView.render()}}});